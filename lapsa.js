var _Lapsa_instances,_Lapsa_rootSelector,_Lapsa_bottomMarginElement,_Lapsa_shelfContainer,_Lapsa_slideShelf,_Lapsa_shelfMargin,_Lapsa_shelfIsOpen,_Lapsa_shelfIsAnimating,_Lapsa_shelfIndicatorContainer,_Lapsa_slideShelfIndicator,_Lapsa_transitionAnimationDistance,_Lapsa_startingSlide,_Lapsa_numBuilds,_Lapsa_currentlyAnimating,_Lapsa_inTableView,_Lapsa_handleKeydownEventBound,_Lapsa_handleTouchstartEventBound,_Lapsa_handleTouchmoveEventBound,_Lapsa_handleMousemoveEventBound,_Lapsa_onResizeBound,_Lapsa_currentlyTouchDevice,_Lapsa_lastMousemoveEvent,_Lapsa_lastWindowHeight,_Lapsa_startWindowHeight,_Lapsa_windowHeightAnimationFrame,_Lapsa_windowHeightAnimationLastTimestamp,_Lapsa_resizeAnimationBound,_Lapsa_missedResizeAnimation,_Lapsa_currentlyDragging,_Lapsa_dragDistanceX,_Lapsa_lastTouchX,_Lapsa_dragDistanceY,_Lapsa_lastTouchY,_Lapsa_lastMoveThisDrag,_Lapsa_safeVh,_Lapsa_onResize,_Lapsa_resizeAnimation,_Lapsa_showSlideShelf,_Lapsa_hideSlideShelf,_Lapsa_showSlideShelfIndicator,_Lapsa_hideSlideShelfIndicator,_Lapsa_handleKeydownEvent,_Lapsa_handleTouchstartEvent,_Lapsa_handleTouchmoveEvent,_Lapsa_handleMousemoveEvent,__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver===state&&f:state.has(receiver))return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value;throw new TypeError("Cannot write private member to an object whose class did not declare it")},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver===state&&f:state.has(receiver))return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver);throw new TypeError("Cannot read private member from an object whose class did not declare it")};const defaultOptions={builds:{},transitionAnimationTime:150,transitionAnimationDistanceFactor:.015,tableViewAnimationTime:600,shelfAnimationTime:275,slideAnimateInEasing:"cubic-bezier(.4, 1.0, .7, 1.0)",slideAnimateOutEasing:"cubic-bezier(.1, 0.0, .2, 0.0)",shelfAnimateInEasing:"cubic-bezier(.4, 1.0, .7, 1.0)",shelfAnimateOutEasing:"cubic-bezier(.4, 0.0, .4, 1.0)",tableViewEasing:"cubic-bezier(.25, 1.0, .5, 1.0)",appendHTML:"",startingSlide:0,tableViewSlidesPerScreen:4,useShelf:!0,useShelfIndicator:!0,permanentShelf:!1,shelfIconPaths:"/icons/",resizeOnTableView:!1,windowHeightAnimationFrames:8,dragDistanceThreshhold:10};class Lapsa{constructor(inputOptions){_Lapsa_instances.add(this),this.currentSlide=-1,this.buildState=0,_Lapsa_rootSelector.set(this,void 0),_Lapsa_bottomMarginElement.set(this,void 0),_Lapsa_shelfContainer.set(this,void 0),_Lapsa_slideShelf.set(this,void 0),_Lapsa_shelfMargin.set(this,15),_Lapsa_shelfIsOpen.set(this,!1),_Lapsa_shelfIsAnimating.set(this,!1),_Lapsa_shelfIndicatorContainer.set(this,void 0),_Lapsa_slideShelfIndicator.set(this,void 0),_Lapsa_transitionAnimationDistance.set(this,0),_Lapsa_startingSlide.set(this,0),_Lapsa_numBuilds.set(this,[]),_Lapsa_currentlyAnimating.set(this,!1),_Lapsa_inTableView.set(this,!1),_Lapsa_handleKeydownEventBound.set(this,void 0),_Lapsa_handleTouchstartEventBound.set(this,void 0),_Lapsa_handleTouchmoveEventBound.set(this,void 0),_Lapsa_handleMousemoveEventBound.set(this,void 0),_Lapsa_onResizeBound.set(this,void 0),_Lapsa_currentlyTouchDevice.set(this,!1),_Lapsa_lastMousemoveEvent.set(this,0),_Lapsa_lastWindowHeight.set(this,window.innerHeight),_Lapsa_startWindowHeight.set(this,window.innerHeight),_Lapsa_windowHeightAnimationFrame.set(this,0),_Lapsa_windowHeightAnimationLastTimestamp.set(this,-1),_Lapsa_resizeAnimationBound.set(this,void 0),_Lapsa_missedResizeAnimation.set(this,!1),_Lapsa_currentlyDragging.set(this,!1),_Lapsa_dragDistanceX.set(this,0),_Lapsa_lastTouchX.set(this,-1),_Lapsa_dragDistanceY.set(this,0),_Lapsa_lastTouchY.set(this,-1),_Lapsa_lastMoveThisDrag.set(this,0),_Lapsa_safeVh.set(this,window.innerHeight/100);var e={...defaultOptions,...inputOptions};if(this.callbacks=e.builds,this.transitionAnimationTime=e.transitionAnimationTime,this.transitionAnimationDistanceFactor=e.transitionAnimationDistanceFactor,this.tableViewAnimationTime=e.tableViewAnimationTime,this.shelfAnimationTime=e.shelfAnimationTime,this.resizeOnTableView=e.resizeOnTableView,this.windowHeightAnimationFrames=e.windowHeightAnimationFrames,__classPrivateFieldSet(this,_Lapsa_startingSlide,e.startingSlide,"f"),this.tableViewSlidesPerScreen=e.tableViewSlidesPerScreen,this.useShelf=e.useShelf,this.useShelfIndicator=e.useShelfIndicator,this.permanentShelf=e.permanentShelf,this.shelfIconPaths=e.shelfIconPaths,"string"==typeof this.shelfIconPaths&&(1<=this.shelfIconPaths.length&&"/"!==this.shelfIconPaths[this.shelfIconPaths.length-1]&&(this.shelfIconPaths=this.shelfIconPaths+"/"),this.shelfIconPaths=[this.shelfIconPaths+"up-2.png",this.shelfIconPaths+"up-1.png",this.shelfIconPaths+"table.png",this.shelfIconPaths+"down-1.png",this.shelfIconPaths+"down-2.png",this.shelfIconPaths+"shelf-indicator.png"]),this.shelfIconPaths.length<5&&this.useShelf)throw new Error("[Lapsa] Not enough shelf icons provided!");if(this.shelfIconPaths.length<6&&this.useShelfIndicator)throw new Error("[Lapsa] No shelf indicator icon provided!");this.slideAnimateInEasing=e.slideAnimateInEasing,this.slideAnimateOutEasing=e.slideAnimateOutEasing,this.shelfAnimateInEasing=e.shelfAnimateInEasing,this.shelfAnimateOutEasing=e.shelfAnimateOutEasing,this.tableViewEasing=e.tableViewEasing,this.appendHTML=e.appendHTML,this.dragDistanceThreshhold=e.dragDistanceThreshhold;e=document.querySelector(":root");if(!e)throw new Error("[Lapsa] Root element doesn't exist");__classPrivateFieldSet(this,_Lapsa_rootSelector,e,"f"),__classPrivateFieldSet(this,_Lapsa_resizeAnimationBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_resizeAnimation).bind(this),"f");e=document.body.querySelector("#lapsa-slide-container");if(!e)throw new Error("[Lapsa] Slide container element doesn't exist");this.slideContainer=e,this.slideContainer.classList.add("lapsa-hover"),__classPrivateFieldSet(this,_Lapsa_bottomMarginElement,document.createElement("div"),"f"),__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").id="lapsa-bottom-margin",this.slideContainer.appendChild(__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f")),this.slides=document.body.querySelectorAll(".slide"),__classPrivateFieldSet(this,_Lapsa_numBuilds,new Array(this.slides.length),"f"),this.slides.forEach((element,index)=>{var e=document.createElement("div"),e=(e.classList.add("lapsa-slide-wrapper"),e.style.top=window.innerWidth/window.innerHeight>=152/89?`calc(${100*index+2.5} * var(--safe-vh))`:`calc(${100*index} * var(--safe-vh) + (100 * var(--safe-vh) - 55.625vw) / 2)`,this.slideContainer.insertBefore(e,element),e.appendChild(element),element.lastElementChild?element.lastElementChild.insertAdjacentHTML("afterend",this.appendHTML):element.innerHTML=this.appendHTML,element.addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_inTableView,"f")&&this.closeTableView(index)}),element.addEventListener("touchstart",__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleTouchstartEvent).bind(this)),element.addEventListener("touchmove",__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleTouchmoveEvent).bind(this)),element.querySelectorAll(".build, [data-build]"));let t=0;__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[index]=0,e.forEach(buildElement=>{var e=buildElement.getAttribute("data-build");null===e?(buildElement.setAttribute("data-build",t.toString()),t++):t=parseInt(e)+1,__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[index]=Math.max(__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[index],t),buildElement.classList.remove("build")});e=Object.keys(null!=(e=null==(e=this.callbacks)?void 0:e[element.id])?e:{});let i=0;e.forEach(key=>i=Math.max(i,parseInt(key)+1||0)),__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[index]=Math.max(__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[index],i)}),__classPrivateFieldSet(this,_Lapsa_transitionAnimationDistance,window.innerWidth/window.innerHeight>=152/89?window.innerHeight*this.transitionAnimationDistanceFactor*159/82:window.innerWidth*this.transitionAnimationDistanceFactor,"f"),__classPrivateFieldSet(this,_Lapsa_safeVh,window.innerHeight/100,"f"),__classPrivateFieldGet(this,_Lapsa_rootSelector,"f").style.setProperty("--safe-vh",__classPrivateFieldGet(this,_Lapsa_safeVh,"f")+"px"),__classPrivateFieldSet(this,_Lapsa_shelfContainer,document.createElement("div"),"f"),__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").id="lapsa-slide-shelf-container",__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").innerHTML=`
			<div id="lapsa-slide-shelf" class="lapsa-hover lapsa-interactable" style="margin-left: ${-__classPrivateFieldGet(this,_Lapsa_shelfMargin,"f")}px; opacity: 0">
				<input type="image" id="lapsa-up-2-button" class="shelf-button lapsa-interactable" src="${this.shelfIconPaths[0]}">
				<input type="image" id="lapsa-up-1-button" class="shelf-button lapsa-interactable" src="${this.shelfIconPaths[1]}">
				<input type="image" id="lapsa-table-button" class="shelf-button lapsa-interactable" src="${this.shelfIconPaths[2]}">
				<input type="image" id="lapsa-down-1-button" class="shelf-button lapsa-interactable" src="${this.shelfIconPaths[3]}">
				<input type="image" id="lapsa-down-2-button" class="shelf-button lapsa-interactable" src="${this.shelfIconPaths[4]}">
			</div>
		`,document.body.appendChild(__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f")),__classPrivateFieldSet(this,_Lapsa_shelfIndicatorContainer,document.createElement("div"),"f"),__classPrivateFieldGet(this,_Lapsa_shelfIndicatorContainer,"f").id="lapsa-slide-shelf-indicator-container",this.useShelfIndicator&&(__classPrivateFieldGet(this,_Lapsa_shelfIndicatorContainer,"f").innerHTML=`<img id="lapsa-slide-shelf-indicator" src="${this.shelfIconPaths[5]}"></img>`),document.body.appendChild(__classPrivateFieldGet(this,_Lapsa_shelfIndicatorContainer,"f")),"scrollRestoration"in history&&(history.scrollRestoration="manual"),setTimeout(()=>window.scrollTo(0,0),10);e=document.querySelector("#lapsa-slide-shelf");if(!e)throw new Error("[Lapsa] Slide shelf element doesn't exist");if(__classPrivateFieldSet(this,_Lapsa_slideShelf,e,"f"),this.useShelfIndicator){e=document.querySelector("#lapsa-slide-shelf-indicator");if(!e)throw new Error("[Lapsa] Slide shelf indicator element doesn't exist");__classPrivateFieldSet(this,_Lapsa_slideShelfIndicator,e,"f"),this.permanentShelf&&(__classPrivateFieldGet(this,_Lapsa_slideShelfIndicator,"f").style.display="none")}this.permanentShelf?(__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").classList.add("permanent-shelf"),__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_showSlideShelf).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelf,"f")),__classPrivateFieldSet(this,_Lapsa_shelfIsAnimating,!1,"f"),__classPrivateFieldSet(this,_Lapsa_shelfIsOpen,!0,"f")):__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_hideSlideShelf).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelf,"f"),0),__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").addEventListener("mouseenter",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")||this.permanentShelf||!this.useShelf||this.showShelf()}),__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").addEventListener("mouseleave",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!this.permanentShelf&&this.useShelf&&this.hideShelf()}),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").children[0].addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")&&this.previousSlide(!0)}),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").children[1].addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")&&this.previousSlide()}),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").children[2].addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")&&(__classPrivateFieldGet(this,_Lapsa_inTableView,"f")?this.closeTableView(this.currentSlide):this.openTableView())}),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").children[3].addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")&&this.nextSlide()}),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").children[4].addEventListener("click",()=>{__classPrivateFieldGet(this,_Lapsa_shelfIsOpen,"f")&&!__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")&&this.nextSlide(!0)}),document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden",document.body.style.userSelect="none",__classPrivateFieldSet(this,_Lapsa_handleKeydownEventBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleKeydownEvent).bind(this),"f"),__classPrivateFieldSet(this,_Lapsa_handleTouchstartEventBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleTouchstartEvent).bind(this),"f"),__classPrivateFieldSet(this,_Lapsa_handleTouchmoveEventBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleTouchmoveEvent).bind(this),"f"),__classPrivateFieldSet(this,_Lapsa_handleMousemoveEventBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_handleMousemoveEvent).bind(this),"f"),__classPrivateFieldSet(this,_Lapsa_onResizeBound,__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_onResize).bind(this),"f"),document.documentElement.addEventListener("keydown",__classPrivateFieldGet(this,_Lapsa_handleKeydownEventBound,"f")),document.documentElement.addEventListener("touchstart",__classPrivateFieldGet(this,_Lapsa_handleTouchstartEventBound,"f")),document.documentElement.addEventListener("touchmove",__classPrivateFieldGet(this,_Lapsa_handleTouchmoveEventBound,"f")),document.documentElement.addEventListener("mousemove",__classPrivateFieldGet(this,_Lapsa_handleMousemoveEventBound,"f")),window.addEventListener("resize",__classPrivateFieldGet(this,_Lapsa_onResizeBound,"f")),setTimeout(()=>this.jumpToSlide(__classPrivateFieldGet(this,_Lapsa_startingSlide,"f")),500)}exit(){this.slideContainer.remove(),__classPrivateFieldGet(this,_Lapsa_shelfContainer,"f").remove(),__classPrivateFieldGet(this,_Lapsa_shelfIndicatorContainer,"f").remove(),this.slides.forEach(element=>element.remove()),document.documentElement.style.overflowY="visible",document.body.style.overflowY="visible",document.body.style.height="fit-content",document.body.style.userSelect="auto",document.documentElement.removeEventListener("keydown",__classPrivateFieldGet(this,_Lapsa_handleKeydownEventBound,"f")),document.documentElement.removeEventListener("touchstart",__classPrivateFieldGet(this,_Lapsa_handleTouchstartEventBound,"f")),document.documentElement.removeEventListener("touchmove",__classPrivateFieldGet(this,_Lapsa_handleTouchmoveEventBound,"f")),document.documentElement.removeEventListener("mousemove",__classPrivateFieldGet(this,_Lapsa_handleMousemoveEventBound,"f")),window.removeEventListener("resize",__classPrivateFieldGet(this,_Lapsa_onResizeBound,"f"))}async nextSlide(skipBuilds=!1){if(!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f")&&!__classPrivateFieldGet(this,_Lapsa_inTableView,"f"))if(__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!0,"f"),0<=this.currentSlide&&!skipBuilds&&0!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]&&this.buildState!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]){const e=[],t=(this.slides[this.currentSlide].querySelectorAll(`[data-build="${this.buildState}"]`).forEach(element=>{this.buildIn(element,2*this.transitionAnimationTime),e.push(new Promise(resolve=>setTimeout(resolve,this.transitionAnimationTime)))}),this.callbacks[this.slides[this.currentSlide].id]),i=t?t[this.buildState]:void 0;i&&e.push(i({lapsa:this,slide:this.slides[this.currentSlide],forward:!0})),await Promise.all(e),this.buildState++,void __classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f")}else{if(this.currentSlide!==this.slides.length-1){if(await this.fadeUpOut(this.slideContainer,this.transitionAnimationTime),0<=this.currentSlide&&this.buildState!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]){const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!0,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="1")}this.currentSlide++,this.buildState=0;const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!0,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="0"),this.slideContainer.style.transform=`matrix(1, 0, 0, 1, 0, ${-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`,await this.fadeUpIn(this.slideContainer,2*this.transitionAnimationTime)}__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f")}}async previousSlide(skipBuilds=!1){if(!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f")&&!__classPrivateFieldGet(this,_Lapsa_inTableView,"f"))if(__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!0,"f"),skipBuilds||0===__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]||0===this.buildState){if(0!==this.currentSlide&&this.currentSlide!==this.slides.length){if(await this.fadeDownOut(this.slideContainer,this.transitionAnimationTime),this.buildState!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]){const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!1,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="1")}this.currentSlide--,this.buildState=__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide];const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!1,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="1"),this.slideContainer.style.transform=`matrix(1, 0, 0, 1, 0, ${-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`,await this.fadeDownIn(this.slideContainer,2*this.transitionAnimationTime)}__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f")}else{this.buildState--;var e=Array.from(this.slides[this.currentSlide].querySelectorAll(`[data-build="${this.buildState}"]`)).map(element=>this.buildOut(element,this.transitionAnimationTime));const t=this.callbacks[this.slides[this.currentSlide].id],i=t?t[this.buildState]:void 0;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!1}),await Promise.all(e),void __classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f")}}async jumpToSlide(index){if(!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f")&&!__classPrivateFieldGet(this,_Lapsa_inTableView,"f")){if(__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!0,"f"),!(index<0||index>=this.slides.length||index===this.currentSlide)){var e=index>this.currentSlide;if(e?await this.fadeUpOut(this.slideContainer,this.transitionAnimationTime):await this.fadeDownOut(this.slideContainer,this.transitionAnimationTime),-1!==this.currentSlide&&this.buildState!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]){const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!1,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="1")}this.currentSlide=index,this.buildState=0;const t=this.callbacks[this.slides[this.currentSlide].id],i=null===t||void 0===t?void 0:t.reset;i&&await i({lapsa:this,slide:this.slides[this.currentSlide],forward:!0,duration:0}),this.slides[this.currentSlide].querySelectorAll("[data-build]").forEach(element=>element.style.opacity="0"),this.slideContainer.style.transform=`matrix(1, 0, 0, 1, 0, ${-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`,e?await this.fadeUpIn(this.slideContainer,2*this.transitionAnimationTime):await this.fadeDownIn(this.slideContainer,2*this.transitionAnimationTime)}__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f")}}async openTableView(duration=this.tableViewAnimationTime){if(!__classPrivateFieldGet(this,_Lapsa_inTableView,"f")&&!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f")){__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!0,"f"),__classPrivateFieldGet(this,_Lapsa_currentlyTouchDevice,"f")&&this.hideShelf(),document.body.style.overflowY="visible",document.body.style.position="relative",this.slideContainer.style.overflowY="visible";const i=document.body.getBoundingClientRect();var e=i.width/i.height>=152/89?1:i.height/(89*i.width/152);const s=Math.min(e/this.tableViewSlidesPerScreen,1);e=e/s;const a=Math.min(Math.max((e-1)/2,this.currentSlide),this.slides.length-1-(e-1)/2),n=(this.slideContainer.style.transformOrigin=`center calc(${100*this.currentSlide+50} * var(--safe-vh))`,i.width/i.height>=152/89?(8835/89*a-100*a)*s*__classPrivateFieldGet(this,_Lapsa_safeVh,"f"):58.125*a*s*window.innerWidth/100-100*a*s*__classPrivateFieldGet(this,_Lapsa_safeVh,"f"));if(this.slideContainer.style.transition=`transform ${duration}ms `+this.tableViewEasing,this.slideContainer.style.transform=i.width/i.height>=152/89?`matrix(${s}, 0, 0, ${s}, 0, ${(58.125*(this.currentSlide-a)*152/89*s-100*this.currentSlide)*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`:`matrix(${s}, 0, 0, ${s}, 0, ${58.125*(this.currentSlide-a)*s*window.innerWidth/100-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`,this.slides.forEach((element,index)=>{element.parentElement&&(element.parentElement.style.transition=`top ${duration}ms `+this.tableViewEasing,i.width/i.height>=152/89?element.parentElement.style.top=`calc(${8835/89*(index-this.currentSlide)+100*this.currentSlide+2.5} * var(--safe-vh))`:element.parentElement.style.top=`calc(${58.125*(index-this.currentSlide)}vw + ${100*this.currentSlide} * var(--safe-vh) + (100 * var(--safe-vh) - 55.625vw) / 2)`)}),this.buildState!==__classPrivateFieldGet(this,_Lapsa_numBuilds,"f")[this.currentSlide]){const t=this.slides[this.currentSlide].querySelectorAll("[data-build]"),l=new Array(t.length);t.forEach((element,index)=>{l[index]=element.style.transition,element.style.transition=`opacity ${duration/2}ms `+this.slideAnimateOutEasing,element.style.opacity="1"});e=this.callbacks[this.slides[this.currentSlide].id],e=null==e?void 0:e.reset;e&&e({lapsa:this,slide:this.slides[this.currentSlide],forward:!1,duration:duration/2}),setTimeout(()=>{t.forEach((element,index)=>{element.style.transition=l[index]})},duration/2)}await new Promise(resolve=>{setTimeout(()=>{var e=this.slides[this.currentSlide].getBoundingClientRect().top,t=(this.slideContainer.style.transition="",this.slides.forEach((element,index)=>{element.parentElement&&(element.parentElement.style.transition="",i.width/i.height>=152/89?element.parentElement.style.top=`calc(${5+8835/89*(index-a)+100*a} * var(--safe-vh))`:element.parentElement.style.top=`calc(${2.5+58.125*(index-a)}vw + ${100*a} * var(--safe-vh))`)}),window.innerWidth/window.innerHeight>=152/89?__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").style.top=`calc(${5+8835/89*(this.slides.length-a)+100*a} * var(--safe-vh))`:__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").style.top=`calc(${2.5+58.125*(this.slides.length-a)}vw + ${100*a} * var(--safe-vh))`,this.slideContainer.style.transformOrigin="center top",this.slideContainer.style.transform=`matrix(${s}, 0, 0, ${s}, 0, ${n})`,document.documentElement.style.overflowY="visible",this.slides[this.currentSlide].getBoundingClientRect().top);window.scrollTo(0,t-e),__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f"),__classPrivateFieldSet(this,_Lapsa_inTableView,!0,"f"),__classPrivateFieldSet(this,_Lapsa_missedResizeAnimation,!1,"f"),this.slideContainer.classList.add("lapsa-table-view"),resolve()},duration)})}}async closeTableView(selection,duration=this.tableViewAnimationTime){if(__classPrivateFieldGet(this,_Lapsa_inTableView,"f")&&!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f")){__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!0,"f"),this.currentSlide=selection,this.slideContainer.classList.remove("lapsa-table-view");const s=document.body.getBoundingClientRect();var e=s.width/s.height>=152/89?1:s.height/(89*s.width/152),e=Math.min(e/this.tableViewSlidesPerScreen,1),t=Math.min(Math.max(1.25,this.currentSlide),this.slides.length-2.25),i=this.slides[0].getBoundingClientRect().top,t=(document.documentElement.style.overflowY="hidden",document.body.style.overflowY="hidden",this.slideContainer.style.transformOrigin=`center calc(${100*t+50} * var(--safe-vh))`,this.slides.forEach((element,index)=>{element.parentElement&&(s.width/s.height>=152/89?element.parentElement.style.top=`calc(${8835/89*(index-this.currentSlide)+100*this.currentSlide+2.5} * var(--safe-vh))`:element.parentElement.style.top=`calc(${58.125*(index-this.currentSlide)}vw + ${100*this.currentSlide} * var(--safe-vh) + (100 * var(--safe-vh) - 55.625vw) / 2)`)}),__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").style.top="0",this.slideContainer.style.transform=`matrix(${e}, 0, 0, ${e}, 0, 0)`,window.scrollTo(0,0),this.slides[0].getBoundingClientRect().top),i=i-t;this.slideContainer.style.transform=`matrix(${e}, 0, 0, ${e}, 0, ${i})`;const a=this.slides[this.currentSlide].querySelectorAll("[data-build]"),n=new Array(a.length);a.forEach((element,index)=>{n[index]=element.style.transition,element.style.transition=`opacity ${duration/3}ms `+this.slideAnimateInEasing,element.style.opacity="0"});t=this.callbacks[this.slides[this.currentSlide].id],t=null==t?void 0:t.reset;t&&t({lapsa:this,slide:this.slides[this.currentSlide],forward:!0,duration:duration/3}),setTimeout(()=>{a.forEach((element,index)=>{element.style.transition=n[index]})},duration/3),this.slideContainer.style.transition="",this.slideContainer.style.transform=`matrix(${e}, 0, 0, ${e}, 0, ${i})`,await new Promise(resolve=>{setTimeout(()=>{this.slideContainer.style.transition=`transform ${duration}ms `+this.tableViewEasing,this.slideContainer.style.transform=`matrix(1, 0, 0, 1, 0, ${-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`,this.slides.forEach((element,index)=>{element.parentElement&&(element.parentElement.style.transition=`top ${duration}ms `+this.tableViewEasing,element.parentElement.style.top=window.innerWidth/window.innerHeight>=152/89?`calc(${100*index+2.5} * var(--safe-vh))`:`calc(${100*index} * var(--safe-vh) + (100 * var(--safe-vh) - 55.625vw) / 2)`)}),setTimeout(()=>{a.forEach((element,index)=>{element.style.transition=n[index]}),this.buildState=0,this.slideContainer.style.transition="",this.slides.forEach(element=>{element.parentElement&&(element.parentElement.style.transition="")}),__classPrivateFieldSet(this,_Lapsa_currentlyAnimating,!1,"f"),__classPrivateFieldSet(this,_Lapsa_inTableView,!1,"f"),document.body.style.position="fixed",__classPrivateFieldGet(this,_Lapsa_missedResizeAnimation,"f")&&(__classPrivateFieldSet(this,_Lapsa_startWindowHeight,__classPrivateFieldGet(this,_Lapsa_lastWindowHeight,"f"),"f"),__classPrivateFieldSet(this,_Lapsa_windowHeightAnimationFrame,1,"f"),window.requestAnimationFrame(__classPrivateFieldGet(this,_Lapsa_resizeAnimationBound,"f"))),resolve()},duration)},16)})}}async showShelf(){this.permanentShelf||__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")||!__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").parentElement||(__classPrivateFieldSet(this,_Lapsa_shelfIsOpen,!0,"f"),__classPrivateFieldSet(this,_Lapsa_shelfIsAnimating,!0,"f"),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").style.display="flex",__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").parentElement.style.paddingRight="100px",setTimeout(async()=>{__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_hideSlideShelfIndicator).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelfIndicator,"f")),await __classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_showSlideShelf).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelf,"f")),__classPrivateFieldSet(this,_Lapsa_shelfIsAnimating,!1,"f")},16))}async hideShelf(){this.permanentShelf||__classPrivateFieldGet(this,_Lapsa_shelfIsAnimating,"f")||!__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").parentElement||(__classPrivateFieldSet(this,_Lapsa_shelfIsOpen,!1,"f"),__classPrivateFieldSet(this,_Lapsa_shelfIsAnimating,!0,"f"),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").parentElement.style.paddingRight="0",__classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_showSlideShelfIndicator).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelfIndicator,"f")),await __classPrivateFieldGet(this,_Lapsa_instances,"m",_Lapsa_hideSlideShelf).call(this,__classPrivateFieldGet(this,_Lapsa_slideShelf,"f")),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").style.display="none",__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").parentElement.style.paddingRight="",__classPrivateFieldSet(this,_Lapsa_shelfIsAnimating,!1,"f"))}async fadeUpIn(element,duration){element.style.marginTop=__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",await new Promise(resolve=>{setTimeout(()=>{const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateInEasing}, opacity ${duration}ms `+this.slideAnimateInEasing,element.style.marginTop="0",element.style.opacity="1",setTimeout(()=>{element.style.transition=e,resolve()},duration)},16)})}async fadeUpOut(element,duration){const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateOutEasing}, opacity ${duration}ms `+this.slideAnimateOutEasing,element.style.marginTop=-__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",element.style.opacity="0",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})}async fadeDownIn(element,duration){element.style.marginTop=-__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",await new Promise(resolve=>{setTimeout(()=>{const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateInEasing}, opacity ${duration}ms `+this.slideAnimateInEasing,element.style.marginTop="0",element.style.opacity="1",setTimeout(()=>{element.style.transition=e,resolve()},duration)},16)})}async fadeDownOut(element,duration){const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateOutEasing}, opacity ${duration}ms `+this.slideAnimateOutEasing,element.style.marginTop=__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",element.style.opacity="0",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})}async buildIn(element,duration){element.style.marginTop=__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",element.style.marginBottom=-__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",await new Promise(resolve=>{setTimeout(()=>{const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateInEasing}, margin-bottom ${duration}ms ${this.slideAnimateInEasing}, opacity ${duration}ms `+this.slideAnimateInEasing,element.style.marginTop="0",element.style.marginBottom="0",element.style.opacity="1",setTimeout(()=>{element.style.transition=e,resolve()},duration)},16)})}async buildOut(element,duration){await new Promise(resolve=>{setTimeout(()=>{const e=element.style.transition;element.style.transition=`margin-top ${duration}ms ${this.slideAnimateInEasing}, margin-bottom ${duration}ms ${this.slideAnimateInEasing}, opacity ${duration}ms `+this.slideAnimateInEasing,element.style.marginTop=__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",element.style.marginBottom=-__classPrivateFieldGet(this,_Lapsa_transitionAnimationDistance,"f")+"px",element.style.opacity="0",setTimeout(()=>{element.style.transition=e,resolve()},duration)},16)})}}_Lapsa_rootSelector=new WeakMap,_Lapsa_bottomMarginElement=new WeakMap,_Lapsa_shelfContainer=new WeakMap,_Lapsa_slideShelf=new WeakMap,_Lapsa_shelfMargin=new WeakMap,_Lapsa_shelfIsOpen=new WeakMap,_Lapsa_shelfIsAnimating=new WeakMap,_Lapsa_shelfIndicatorContainer=new WeakMap,_Lapsa_slideShelfIndicator=new WeakMap,_Lapsa_transitionAnimationDistance=new WeakMap,_Lapsa_startingSlide=new WeakMap,_Lapsa_numBuilds=new WeakMap,_Lapsa_currentlyAnimating=new WeakMap,_Lapsa_inTableView=new WeakMap,_Lapsa_handleKeydownEventBound=new WeakMap,_Lapsa_handleTouchstartEventBound=new WeakMap,_Lapsa_handleTouchmoveEventBound=new WeakMap,_Lapsa_handleMousemoveEventBound=new WeakMap,_Lapsa_onResizeBound=new WeakMap,_Lapsa_currentlyTouchDevice=new WeakMap,_Lapsa_lastMousemoveEvent=new WeakMap,_Lapsa_lastWindowHeight=new WeakMap,_Lapsa_startWindowHeight=new WeakMap,_Lapsa_windowHeightAnimationFrame=new WeakMap,_Lapsa_windowHeightAnimationLastTimestamp=new WeakMap,_Lapsa_resizeAnimationBound=new WeakMap,_Lapsa_missedResizeAnimation=new WeakMap,_Lapsa_currentlyDragging=new WeakMap,_Lapsa_dragDistanceX=new WeakMap,_Lapsa_lastTouchX=new WeakMap,_Lapsa_dragDistanceY=new WeakMap,_Lapsa_lastTouchY=new WeakMap,_Lapsa_lastMoveThisDrag=new WeakMap,_Lapsa_safeVh=new WeakMap,_Lapsa_instances=new WeakSet,_Lapsa_onResize=function(){if(!__classPrivateFieldGet(this,_Lapsa_currentlyAnimating,"f"))if(__classPrivateFieldSet(this,_Lapsa_transitionAnimationDistance,window.innerWidth/window.innerHeight>=152/89?window.innerHeight*this.transitionAnimationDistanceFactor*159/82:window.innerWidth*this.transitionAnimationDistanceFactor,"f"),__classPrivateFieldGet(this,_Lapsa_inTableView,"f")){var e=document.body.getBoundingClientRect(),t=e.width/e.height>=152/89?1:e.height/(89*e.width/152),i=Math.min(t/this.tableViewSlidesPerScreen,1),t=t/i;const s=Math.min(Math.max((t-1)/2,this.currentSlide),this.slides.length-1-(t-1)/2);t=e.width/e.height>=152/89?(8835/89*s-100*s)*i*__classPrivateFieldGet(this,_Lapsa_safeVh,"f"):58.125*s*i*window.innerWidth/100-100*s*i*__classPrivateFieldGet(this,_Lapsa_safeVh,"f");this.slides.forEach((element,index)=>{element.parentElement&&(window.innerWidth/window.innerHeight>=152/89?element.parentElement.style.top=`calc(${5+8835/89*(index-s)+100*s} * var(--safe-vh))`:element.parentElement.style.top=`calc(${2.5+58.125*(index-s)}vw + ${100*s} * var(--safe-vh))`)}),window.innerWidth/window.innerHeight>=152/89?__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").style.top=`calc(${5+8835/89*(this.slides.length-s)+100*s} * var(--safe-vh))`:__classPrivateFieldGet(this,_Lapsa_bottomMarginElement,"f").style.top=`calc(${2.5+58.125*(this.slides.length-s)}vw + ${100*s} * var(--safe-vh))`,this.slideContainer.style.transform=`matrix(${i}, 0, 0, ${i}, 0, ${t})`,this.resizeOnTableView?(__classPrivateFieldSet(this,_Lapsa_startWindowHeight,__classPrivateFieldGet(this,_Lapsa_lastWindowHeight,"f"),"f"),__classPrivateFieldSet(this,_Lapsa_windowHeightAnimationFrame,1,"f"),window.requestAnimationFrame(__classPrivateFieldGet(this,_Lapsa_resizeAnimationBound,"f"))):__classPrivateFieldSet(this,_Lapsa_missedResizeAnimation,!0,"f")}else __classPrivateFieldSet(this,_Lapsa_safeVh,window.innerHeight/100,"f"),__classPrivateFieldGet(this,_Lapsa_rootSelector,"f").style.setProperty("--safe-vh",__classPrivateFieldGet(this,_Lapsa_safeVh,"f")+"px"),this.slides.forEach((element,index)=>{element.parentElement&&(element.parentElement.style.top=window.innerWidth/window.innerHeight>=152/89?`calc(${100*index+2.5} * var(--safe-vh))`:`calc(${100*index} * var(--safe-vh) + (100 * var(--safe-vh) - 55.625vw) / 2)`)}),this.slideContainer.style.transform=`matrix(1, 0, 0, 1, 0, ${-100*this.currentSlide*__classPrivateFieldGet(this,_Lapsa_safeVh,"f")})`},_Lapsa_resizeAnimation=function(timestamp){var e,t,i=timestamp-__classPrivateFieldGet(this,_Lapsa_windowHeightAnimationLastTimestamp,"f");__classPrivateFieldSet(this,_Lapsa_windowHeightAnimationLastTimestamp,timestamp,"f"),0!=i&&(i=.5*(1+Math.cos(Math.PI*(__classPrivateFieldGet(this,_Lapsa_windowHeightAnimationFrame,"f")/this.windowHeightAnimationFrames+1))),i=__classPrivateFieldGet(this,_Lapsa_startWindowHeight,"f")*(1-i)+window.innerHeight*i,__classPrivateFieldSet(this,_Lapsa_lastWindowHeight,i,"f"),__classPrivateFieldSet(this,_Lapsa_safeVh,i/100,"f"),__classPrivateFieldGet(this,_Lapsa_rootSelector,"f").style.setProperty("--safe-vh",__classPrivateFieldGet(this,_Lapsa_safeVh,"f")+"px"),__classPrivateFieldGet(this,_Lapsa_inTableView,"f")&&(t=(e=window.innerWidth/i>=152/89?1:i/(89*window.innerWidth/152))/(e=Math.min(e/this.tableViewSlidesPerScreen,1)),t=Math.min(Math.max((t-1)/2,this.currentSlide),this.slides.length-1-(t-1)/2),i=window.innerWidth/i>=152/89?(8835/89*t-100*t)*e*__classPrivateFieldGet(this,_Lapsa_safeVh,"f"):58.125*t*e*window.innerWidth/100-100*t*e*__classPrivateFieldGet(this,_Lapsa_safeVh,"f"),this.slideContainer.style.transform=`matrix(${e}, 0, 0, ${e}, 0, ${i})`),__classPrivateFieldSet(this,_Lapsa_windowHeightAnimationFrame,(t=__classPrivateFieldGet(this,_Lapsa_windowHeightAnimationFrame,"f"),++t),"f"),__classPrivateFieldGet(this,_Lapsa_windowHeightAnimationFrame,"f")<=this.windowHeightAnimationFrames)&&window.requestAnimationFrame(__classPrivateFieldGet(this,_Lapsa_resizeAnimationBound,"f"))},_Lapsa_showSlideShelf=async function(element,duration=this.shelfAnimationTime){const e=element.style.transition;element.style.transition=`margin-left ${duration}ms ${this.shelfAnimateInEasing}, opacity ${duration}ms `+this.shelfAnimateInEasing,element.style.marginLeft=__classPrivateFieldGet(this,_Lapsa_shelfMargin,"f")+"px",element.style.opacity="1",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})},_Lapsa_hideSlideShelf=async function(element,duration=this.shelfAnimationTime){const e=element.style.transition;element.style.transition=`margin-left ${duration}ms ${this.shelfAnimateOutEasing}, opacity ${duration}ms `+this.shelfAnimateOutEasing,element.style.marginLeft=-__classPrivateFieldGet(this,_Lapsa_shelfMargin,"f")+"px",element.style.opacity="0",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})},_Lapsa_showSlideShelfIndicator=async function(element,duration=this.shelfAnimationTime){if(this.useShelfIndicator&&element){const e=element.style.transition;element.style.transition=`opacity ${duration}ms `+this.shelfAnimateOutEasing,element.style.opacity="1",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})}},_Lapsa_hideSlideShelfIndicator=async function(element,duration=this.shelfAnimationTime){if(this.useShelfIndicator&&element){const e=element.style.transition;element.style.transition=`opacity ${duration}ms `+this.shelfAnimateInEasing,element.style.opacity="0",await new Promise(resolve=>{setTimeout(()=>{element.style.transition=e,resolve()},duration)})}},_Lapsa_handleKeydownEvent=function(e){"ArrowRight"===e.key||"ArrowDown"===e.key||" "===e.key||"Enter"===e.key?this.nextSlide():"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||this.previousSlide()},_Lapsa_handleTouchstartEvent=function(e){__classPrivateFieldSet(this,_Lapsa_currentlyTouchDevice,!0,"f"),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").classList.remove("lapsa-hover"),this.slideContainer.classList.remove("lapsa-hover"),__classPrivateFieldSet(this,_Lapsa_currentlyDragging,!1,"f");var t=e.target instanceof HTMLElement&&e.target.classList.contains("lapsa-interactable");__classPrivateFieldGet(this,_Lapsa_inTableView,"f")||1<e.touches.length||t||(__classPrivateFieldSet(this,_Lapsa_currentlyDragging,!0,"f"),__classPrivateFieldSet(this,_Lapsa_lastMoveThisDrag,0,"f"),__classPrivateFieldSet(this,_Lapsa_dragDistanceX,0,"f"),__classPrivateFieldSet(this,_Lapsa_lastTouchX,-1,"f"),__classPrivateFieldSet(this,_Lapsa_dragDistanceY,0,"f"),__classPrivateFieldSet(this,_Lapsa_lastTouchY,-1,"f"))},_Lapsa_handleTouchmoveEvent=function(e){__classPrivateFieldGet(this,_Lapsa_inTableView,"f")||!__classPrivateFieldGet(this,_Lapsa_currentlyDragging,"f")||1<e.touches.length||e.target instanceof HTMLElement&&e.target.classList.contains("lapsa-interactable")||(e.preventDefault(),-1===__classPrivateFieldGet(this,_Lapsa_lastTouchY,"f")?__classPrivateFieldSet(this,_Lapsa_lastTouchY,e.touches[0].clientY,"f"):(__classPrivateFieldSet(this,_Lapsa_dragDistanceY,__classPrivateFieldGet(this,_Lapsa_dragDistanceY,"f")+(e.touches[0].clientY-__classPrivateFieldGet(this,_Lapsa_lastTouchY,"f")),"f"),__classPrivateFieldSet(this,_Lapsa_lastTouchY,e.touches[0].clientY,"f"),__classPrivateFieldGet(this,_Lapsa_dragDistanceY,"f")<-this.dragDistanceThreshhold&&(0===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f")||-1===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f"))?(__classPrivateFieldSet(this,_Lapsa_lastMoveThisDrag,1,"f"),this.nextSlide()):__classPrivateFieldGet(this,_Lapsa_dragDistanceY,"f")>this.dragDistanceThreshhold&&(0===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f")||1===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f"))&&(__classPrivateFieldSet(this,_Lapsa_lastMoveThisDrag,-1,"f"),this.previousSlide())),-1===__classPrivateFieldGet(this,_Lapsa_lastTouchX,"f")?__classPrivateFieldSet(this,_Lapsa_lastTouchX,e.touches[0].clientX,"f"):(__classPrivateFieldSet(this,_Lapsa_dragDistanceX,__classPrivateFieldGet(this,_Lapsa_dragDistanceX,"f")+(e.touches[0].clientX-__classPrivateFieldGet(this,_Lapsa_lastTouchX,"f")),"f"),__classPrivateFieldSet(this,_Lapsa_lastTouchX,e.touches[0].clientX,"f"),__classPrivateFieldGet(this,_Lapsa_dragDistanceX,"f")<-this.dragDistanceThreshhold&&(0===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f")||2===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f"))?(__classPrivateFieldSet(this,_Lapsa_lastMoveThisDrag,-2,"f"),this.hideShelf()):__classPrivateFieldGet(this,_Lapsa_dragDistanceX,"f")>this.dragDistanceThreshhold&&(0===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f")||-2===__classPrivateFieldGet(this,_Lapsa_lastMoveThisDrag,"f"))&&(__classPrivateFieldSet(this,_Lapsa_lastMoveThisDrag,2,"f"),this.showShelf())))},_Lapsa_handleMousemoveEvent=function(){var e;__classPrivateFieldGet(this,_Lapsa_currentlyTouchDevice,"f")&&(e=Date.now()-__classPrivateFieldGet(this,_Lapsa_lastMousemoveEvent,"f"),__classPrivateFieldSet(this,_Lapsa_lastMousemoveEvent,Date.now(),"f"),3<=e)&&e<=50&&33!=e&&(__classPrivateFieldSet(this,_Lapsa_currentlyTouchDevice,!1,"f"),__classPrivateFieldGet(this,_Lapsa_slideShelf,"f").classList.add("lapsa-hover"),this.slideContainer.classList.add("lapsa-hover"))};export default Lapsa;